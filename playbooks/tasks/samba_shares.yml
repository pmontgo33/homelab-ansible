# Need to create a samba password on the server by running:
# $ sudo smbpasswd -a pi

- include_vars: vars/samba_vars.yml

- name: Configuring samba share
  template:
    src: "{{ inventory_hostname }}_smb.conf"
    dest: /etc/samba/smb.conf
    owner: root
    group: root
    mode: 0644
    
- name: Restart samba service
  ansible.builtin.service:
    name: smbd
    state: restarted
    
- name: Create/update samba users
  include_tasks: "samba_users.yml"
  loop: "{{users}}"