- name: copy template backups.sh file
  template:
    src: "backups.sh.j2"
    dest: "/home/{{ primary_user }}/backup_script/backups.sh"
    owner: "{{ primary_user }}"
    group: "{{ primary_user }}"
    mode: 0777

- name: Ensure a job that runs backups.sh at 3:00 exists.
  ansible.builtin.cron:
    user: root
    name: "backups"
    minute: "0"
    hour: "3"
    job: "cd /home/{{ primary_user }}/backup_script && ./backups.sh"
  register: crontab

- name: Set Timezone
  include_tasks: "./tasks/set_timezone.yml"
  when: crontab.changed
